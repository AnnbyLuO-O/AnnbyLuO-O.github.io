<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>\ä¸¹å°¼ç•¢æ¥­å¿«æ¨‚/</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    @font-face { font-family: 'Cubic 11'; src: url('https://cdn.jsdelivr.net/npm/man-tout-font@1.0.1/font/MTC.woff2') format('woff2'); }

   
    :root{
      --bg: #eaf7ef;              
      --panel: #f7fff9;           
      --text: #2e3a33;            
      --border: #375e44;          
      --shadow: #8abf9d;          
      --accent: #69c28f;          
      --accent-hover: #8ed6ab;    
      --warn: #f3b37a;            
      --warn-hover: #e6974a;
      --title: #2f7d55;           
      --code-bg: #263329;         
      --code-fg: #b8ffc8;         
      --cursor: #b8ffc8;          
      --rule-chip-bg:#263329;     
      --rule-chip-fg:#b8ffc8;     
      --scrollbar:#7fc9a2;        
      --scrollbar-hover:#a7ddbf;
      --game-canvas:#9bbc0f;      
      --bullet:#69c28f;           
    }

    
    body{
      font-family: 'Cubic 11','Press Start 2P',cursive;
      background: var(--bg);
      color: var(--text);
      display:flex; justify-content:center; align-items:center;
      height:100vh; margin:0; overflow:hidden; image-rendering:pixelated;
    }
    .container{
      position:relative; text-align:center;
      background: var(--panel);
      padding:30px; border:4px solid var(--border);
      box-shadow:8px 8px 0 var(--shadow); width:90%; max-width:450px;
    }
    #result-container,#game-container{ display:none; }

    h1{ font-size:22px; color:var(--title); line-height:1.5; }
    p{ line-height:1.5; font-size:14px; }

    input[type="text"]{
      width:80%; padding:10px; margin-bottom:15px;
      border:2px solid var(--border); background:#ffffff;
      font:12px 'Cubic 11','Press Start 2P',cursive; color:var(--text);
    }
    input::placeholder{ color:#8aa297; font-size:9px; }

    button{
      background: var(--accent); color:#0f2a1d;
      padding:12px 20px; border:2px solid var(--border);
      cursor:pointer; border-radius:0;
      font:12px 'Cubic 11','Press Start 2P',cursive;
    }
    button:hover{ background: var(--accent-hover); color:#052115; }

      #code-message-area{
      background: var(--code-bg);
      color: var(--code-fg);
      font:14px 'Courier New',monospace;
      text-align:left; padding:15px; border:2px solid var(--border);
      min-height:100px; max-height:min(40vh,260px);
      overflow-y:auto; overflow-x:hidden; line-height:1.6;
      white-space:pre-wrap; word-break:break-word; margin-bottom:15px;
      position:relative;
    }
    #code-message-area::-webkit-scrollbar{ width:10px; }
    #code-message-area::-webkit-scrollbar-track{ background:#1e2a21; }
    #code-message-area::-webkit-scrollbar-thumb{ background:var(--scrollbar); border-radius:6px; }
    #code-message-area::-webkit-scrollbar-thumb:hover{ background:var(--scrollbar-hover); }

    .typing-cursor{
      display:inline-block; width:8px; height:1.1em; margin-left:1px;
      background: var(--cursor); animation: blink 1s step-end infinite;
      vertical-align:baseline;
    }
    @keyframes blink{ from,to{background:transparent} 50%{background:var(--cursor)} }

  
    .modal-overlay{ position:fixed; inset:0; display:none; justify-content:center; align-items:center; background:rgba(0,0,0,.7); z-index:1000; }
    .modal-content{ background: var(--panel); padding:25px; border:4px solid var(--border); box-shadow:8px 8px 0 var(--shadow); width:90%; max-width:400px; }
    .modal-content p{ color:var(--title); margin-bottom:20px; }

    .modal-buttons{ display:flex; flex-direction:column; align-items:center; gap:10px; }
    .modal-buttons button{ display:inline-block; width:auto; min-width:220px; margin:0; font-size:12px; }
    #confirm-btn{ background:var(--accent); } #confirm-btn:hover{ background:var(--accent-hover); }
    #cancel-btn{ background:var(--warn); }   #cancel-btn:hover{ background:var(--warn-hover); }

    
    #rules-title{ font-size:18px; color:var(--title); text-align:center; margin:0 0 12px; }
    #rules-list{
      list-style:none; margin:0 0 18px; padding:12px;
      background: var(--rule-chip-bg); color: var(--rule-chip-fg);
      border:2px solid var(--border); font:13px 'Courier New',monospace;
      line-height:1.8; text-align:left;
    }
    #start-game-btn{
      display:block; margin:15px auto 0; background:#5bc084; color:#072016;
    }
    #start-game-btn:hover{ background:#7bd39d; }

    
    #game-ui{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; font-size:12px; }
    .hearts{ display:flex; gap:8px; }
    .heart{ width:18px; height:18px; background:#ff4d4d; border:2px solid #243a2b; border-radius:50%; box-sizing:border-box; }
    #game-canvas{ background:var(--game-canvas); border:4px solid #243a2b; width:100%; height:auto; }
    .overlay-screen{
      position:absolute; inset:0; display:none; justify-content:center; align-items:center; flex-direction:column;
      background:rgba(15,56,15,.9); color:#fff;
    }
    .overlay-screen h2{ margin-bottom:16px; }
    .overlay-screen button{ margin:8px auto 0; }

    @media (max-width: 500px) {
      .container { width: 85%; padding: 15px; }
      h1 { font-size: 18px; }
      button { padding: 10px 15px; font-size: 11px; }
      #code-message-area { font-size: 12px; min-height: 80px; }
      .modal-content { padding: 20px; max-width: 90%; }
    }
  </style>
</head>
<body>

  <!-- è¼¸å…¥åå­— -->
  <div id="input-container" class="container">
    <h1>For Danny</h1>
    <p>Please enter your name</p>
    <input type="text" id="name-input" placeholder="Happy ThursdayğŸ‘½">
    <button onclick="showMessage()">see message</button>
  </div>

  <!-- é¡¯ç¤ºè¨Šæ¯ + é€²å…¥éŠæˆ² -->
  <div id="result-container" class="container">
    <p>Message for you:</p>
    <pre id="code-message-area"></pre>
    <button onclick="showRules()">Danny shooting</button>
  </div>

  <!-- éŠæˆ²å®¹å™¨ -->
  <div id="game-container" class="container" style="padding:16px;">
    <div id="game-ui">
      <div id="score">Score: 0</div>
      <div id="lives" class="hearts"></div>
    </div>
    <div style="position:relative">
      <canvas id="game-canvas" width="420" height="380"></canvas>
      <div id="game-over" class="overlay-screen">
        <h2>GAME OVER</h2>
        <button onclick="resetToStart()">Zai Lai Yi Tzu !</button>
      </div>
      <div id="win-screen" class="overlay-screen">
        <h2>U r the BEST !</h2>
        <button onclick="resetToStart()">Thanks for the gift!</button>
      </div>
    </div>
  </div>

  <!-- ç¢ºèªåå­— -->
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal-content">
      <p id="confirmation-text">Are you sure you are ... ?</p>
      <div class="modal-buttons">
        <button id="confirm-btn" onclick="confirmName()">I've checked it out.</button>
        <button id="cancel-btn" onclick="cancelConfirmation()">My bad. Let me start over.</button>
      </div>
    </div>
  </div>

  <!-- è¦å‰‡è¦–çª— -->
  <div id="rules-modal-overlay" class="modal-overlay">
    <div class="modal-content">
      <h2 id="rules-title">Game Rules</h2>
      <ul id="rules-list">
        <li>1. ç´…é»é»æ˜¯å°¼çš„ä¸‰æ¢å‘½</li>
        <li>2. ç©ºç™½éµå¯ä»¥ç™¼å°„å­å½ˆ</li>
        <li>3. ç¶ ç¶ çš„æ˜¯å¤–æ˜Ÿäººæœƒæ”»æ“Šå°¼(å¤–æ˜Ÿäººçš„å½¢ç‹€å¾ˆé›£æ==)</li>
        <li>4. è¢«å¤–æ˜Ÿäººæ”»æ“Šä¸€æ¬¡æœƒå°‘ä¸€æ¢å‘½</li>
        <li>5. æ‰“åˆ°ä¸€éš»å¤–æ˜Ÿäºº+2åˆ† 50åˆ†ç®—å°¼å²å®³</li>
        <li>6. è¢«æ‰“ä¸‰æ¬¡å°±å±æ‰äº†</li>
      </ul>
      <button id="start-game-btn" onclick="startGame()">Who Pa Who, Start !</button>
    </div>
  </div>

  <script defer>
    const messages = {
      'Danny': `ä»Šå¤©æ˜¯æœƒå¸¶é›»è…¦ä¸Šèª²çš„æ˜ŸæœŸå››å—? 
ä¸çŸ¥é“é€™å€‹é¡è‰²æœ‰æ²’æœ‰èª¿å° 
é€™å€‹ç¶ çš„åå­—å¾ˆå¯æ„›æ¬¸å«åšå°éœ¸ç‹ç¶ å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ 
é›»è…¦ç‰ˆçš„ä¹Ÿé€çµ¦å¦³äº† äº¤å·à«® âš†ï»Œâš†áƒà«®âš†ï»Œâš† áƒ`
    };

    let currentName='', typingInterval=null;

    function showMessage(){
      currentName = document.getElementById('name-input').value;
      if(!currentName.trim()){ alert('Please enter your name firstï¼'); return; }
      document.getElementById('confirmation-text').innerText = `Are you sure you are "${currentName}" ?`;
      document.getElementById('modal-overlay').style.display='flex';
    }
    function cancelConfirmation(){ document.getElementById('modal-overlay').style.display='none'; }
    function confirmName(){
      cancelConfirmation();
      const msg = (currentName in messages)?messages[currentName]:`Who are you ${currentName}? No message for you.`;
      const area = document.getElementById('code-message-area');
      area.innerHTML='';
      typeMessage(msg, area);
      document.getElementById('input-container').style.display='none';
      document.getElementById('result-container').style.display='block';
    }
    function typeMessage(message, element){
      if(typingInterval){ clearInterval(typingInterval); typingInterval=null; }
      let i=0; element.innerHTML='<span class="typing-cursor"></span>';
      typingInterval=setInterval(()=>{
        if(i<message.length){
          const cursor=element.querySelector('.typing-cursor');
          const ch=document.createTextNode(message[i]);
          if(cursor) element.insertBefore(ch,cursor);
          element.scrollTop = element.scrollHeight;
          i++;
        }else{
          clearInterval(typingInterval); typingInterval=null;
          const c=element.querySelector('.typing-cursor'); if(c) c.remove();
        }
      },80);
    }

    
    function showRules(){ document.getElementById('rules-modal-overlay').style.display='flex'; }

    
    let player, keys, playerBullets, enemies, enemyBullets, score, lives, enemySpawnTimer, gameLoopId;
    let gameActive=false;

    function startGame(){
      document.getElementById('rules-modal-overlay').style.display='none';
      document.getElementById('result-container').style.display='none';
      document.getElementById('game-container').style.display='block';
      initGameVariables(); if(gameLoopId) cancelAnimationFrame(gameLoopId); gameLoop();
    }
    function initGameVariables(){
      const cvs=document.getElementById('game-canvas');
      player={x:cvs.width/2-15,y:cvs.height-40,width:30,height:20,speed:4};
      keys={ArrowLeft:false,ArrowRight:false};
      playerBullets=[]; enemies=[]; enemyBullets=[];
      score=0; lives=3; enemySpawnTimer=0; gameActive=true;
      document.getElementById('game-over').style.display='none';
      document.getElementById('win-screen').style.display='none';
      updateUI();
    }
    function resetToStart(){
      gameActive=false; if(gameLoopId) cancelAnimationFrame(gameLoopId);
      document.getElementById('game-container').style.display='none';
      document.getElementById('input-container').style.display='block';
      document.getElementById('name-input').value='';
      document.getElementById('code-message-area').innerHTML='';
    }

    document.addEventListener('keydown',e=>{ if(keys&&e.code in keys) keys[e.code]=true; if(e.code==='Space') shoot(); });
    document.addEventListener('keyup',e=>{ if(keys&&e.code in keys) keys[e.code]=false; });

    function shoot(){
      if(!gameActive) return;
      playerBullets.push({ x: player.x + player.width/2 - 2.5, y: player.y, width:5, height:10, speed:7 });
    }
    function updateUI(){
      document.getElementById('score').textContent=`Score: ${score}`;
      const hearts=document.getElementById('lives'); hearts.innerHTML='';
      for(let i=0;i<lives;i++){ const h=document.createElement('div'); h.className='heart'; hearts.appendChild(h); }
    }
    function checkCollision(a,b){ return a.x<b.x+b.width && a.x+a.width>b.x && a.y<b.y+b.height && a.y+a.height>b.y; }

    function drawPlayer(p){
      const ctx=document.getElementById('game-canvas').getContext('2d');
      ctx.fillStyle='#ffffff';
      ctx.beginPath();
      ctx.moveTo(p.x+p.width/2, p.y);
      ctx.lineTo(p.x+p.width, p.y+p.height);
      ctx.lineTo(p.x, p.y+p.height);
      ctx.closePath(); ctx.fill();
      ctx.fillStyle='#4a90e2';
      ctx.fillRect(p.x+p.width/2-3, p.y+8, 6, 6);
    }
    function drawEnemy(e){
      const ctx=document.getElementById('game-canvas').getContext('2d');
      ctx.fillStyle='#0f380f';
      ctx.fillRect(e.x, e.y+4, e.width, 12);
      ctx.fillRect(e.x-4, e.y+8, e.width+8, 4);
      ctx.fillStyle='#ffffff';
      ctx.fillRect(e.x+6, e.y, 4, 4);
      ctx.fillRect(e.x+20, e.y, 4, 4);
    }

    function gameLoop(){
      if(!gameActive) return;
      const cvs=document.getElementById('game-canvas');
      const ctx=cvs.getContext('2d');
      ctx.clearRect(0,0,cvs.width,cvs.height);

      if(keys.ArrowLeft && player.x>0) player.x-=player.speed;
      if(keys.ArrowRight && player.x<cvs.width-player.width) player.x+=player.speed;
      drawPlayer(player);

      playerBullets.forEach((b,i)=>{
        b.y-=b.speed; ctx.fillStyle='var(--bullet)'; ctx.fillRect(b.x,b.y,b.width,b.height);
        if(b.y<0) playerBullets.splice(i,1);
      });

      enemyBullets.forEach((b,i)=>{
        b.y+=b.speed; ctx.fillStyle='#2b4c36'; ctx.fillRect(b.x,b.y,b.width,b.height);
        if(checkCollision(b,player)){ enemyBullets.splice(i,1); lives--; updateUI(); if(lives<=0){ gameActive=false; document.getElementById('game-over').style.display='flex'; } }
        if(b.y>cvs.height) enemyBullets.splice(i,1);
      });

      enemySpawnTimer++;
      if(enemySpawnTimer>80){
        enemies.push({ x: Math.random()*(cvs.width-30), y:-20, width:30, height:20, speed:2 });
        enemySpawnTimer=0;
      }

      enemies.forEach((e,ei)=>{
        e.y+=e.speed; if(e.y>cvs.height) enemies.splice(ei,1);
        drawEnemy(e);
        if(Math.random()<0.008){
          enemyBullets.push({ x:e.x+e.width/2-2.5, y:e.y+e.height, width:5, height:10, speed:4 });
        }
        playerBullets.forEach((b,bi)=>{
          if(checkCollision(b,e)){ enemies.splice(ei,1); playerBullets.splice(bi,1); score+=2; updateUI(); }
        });
      });

      if(score>=50){ gameActive=false; document.getElementById('win-screen').style.display='flex'; }
      gameLoopId=requestAnimationFrame(gameLoop);
    }
  </script>
</body>
</html>

